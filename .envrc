# Direnv + nix-direnv: load the pinned dev shell
# Requires nix-direnv to be installed and configured (see README).

watch_file flake.nix
watch_file flake.lock
watch_file shell.nix

if declare -F use_flake >/dev/null 2>&1; then
  use flake .
elif declare -F use_nix >/dev/null 2>&1; then
  # Fallback for non-flake setups
  use nix
else
  echo "nix-direnv not configured; install nix-direnv and run 'direnv allow'" >&2
fi
